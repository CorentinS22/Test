f8926b40f889a74506bb9ae834903028
const BookRepository = require('./book.repository');

describe('Book repository Save', function () {
  test('Test save a book', () => {
    const dbMock = {
      get: jest.fn().mockReturnThis(),
      push: jest.fn().mockReturnThis(),
      write: jest.fn().mockReturnThis()
    };
    const repository = new BookRepository(dbMock);
    repository.save({
      id: 1,
      name: "Unit test"
    });
    expect(dbMock.write.mock.calls.length).toBe(1);
  });
});
describe('Book repository getTotalCount', function () {
  test('Test getTotalCount', () => {
    const dbMock = {
      get: jest.fn().mockReturnThis(),
      size: jest.fn().mockReturnThis(),
      value: jest.fn().mockReturnValue(2)
    };
    const repository = new BookRepository(dbMock);
    expect(repository.getTotalCount()).toBe(2);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJvb2sucmVwb3Npcm95LnRlc3QuanMiXSwibmFtZXMiOlsiQm9va1JlcG9zaXRvcnkiLCJyZXF1aXJlIiwiZGVzY3JpYmUiLCJ0ZXN0IiwiZGJNb2NrIiwiZ2V0IiwiamVzdCIsImZuIiwibW9ja1JldHVyblRoaXMiLCJwdXNoIiwid3JpdGUiLCJyZXBvc2l0b3J5Iiwic2F2ZSIsImlkIiwibmFtZSIsImV4cGVjdCIsIm1vY2siLCJjYWxscyIsImxlbmd0aCIsInRvQmUiLCJzaXplIiwidmFsdWUiLCJtb2NrUmV0dXJuVmFsdWUiLCJnZXRUb3RhbENvdW50Il0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxjQUFjLEdBQUdDLE9BQU8sQ0FBQyxtQkFBRCxDQUE5Qjs7QUFFQUMsUUFBUSxDQUFDLHNCQUFELEVBQXlCLFlBQVk7QUFFekNDLEVBQUFBLElBQUksQ0FBQyxrQkFBRCxFQUFxQixNQUFNO0FBRTNCLFVBQU1DLE1BQU0sR0FBRztBQUNYQyxNQUFBQSxHQUFHLEVBQUdDLElBQUksQ0FBQ0MsRUFBTCxHQUFVQyxjQUFWLEVBREs7QUFFWEMsTUFBQUEsSUFBSSxFQUFHSCxJQUFJLENBQUNDLEVBQUwsR0FBVUMsY0FBVixFQUZJO0FBR1hFLE1BQUFBLEtBQUssRUFBR0osSUFBSSxDQUFDQyxFQUFMLEdBQVVDLGNBQVY7QUFIRyxLQUFmO0FBS0EsVUFBTUcsVUFBVSxHQUFHLElBQUlYLGNBQUosQ0FBbUJJLE1BQW5CLENBQW5CO0FBQ0FPLElBQUFBLFVBQVUsQ0FBQ0MsSUFBWCxDQUFnQjtBQUFDQyxNQUFBQSxFQUFFLEVBQUUsQ0FBTDtBQUFRQyxNQUFBQSxJQUFJLEVBQUU7QUFBZCxLQUFoQjtBQUVBQyxJQUFBQSxNQUFNLENBQUNYLE1BQU0sQ0FBQ00sS0FBUCxDQUFhTSxJQUFiLENBQWtCQyxLQUFsQixDQUF3QkMsTUFBekIsQ0FBTixDQUF1Q0MsSUFBdkMsQ0FBNEMsQ0FBNUM7QUFDSCxHQVhHLENBQUo7QUFZSCxDQWRPLENBQVI7QUFnQkFqQixRQUFRLENBQUMsK0JBQUQsRUFBa0MsWUFBWTtBQUVsREMsRUFBQUEsSUFBSSxDQUFDLG9CQUFELEVBQXVCLE1BQU07QUFFN0IsVUFBTUMsTUFBTSxHQUFHO0FBQ1hDLE1BQUFBLEdBQUcsRUFBR0MsSUFBSSxDQUFDQyxFQUFMLEdBQVVDLGNBQVYsRUFESztBQUVYWSxNQUFBQSxJQUFJLEVBQUdkLElBQUksQ0FBQ0MsRUFBTCxHQUFVQyxjQUFWLEVBRkk7QUFHWGEsTUFBQUEsS0FBSyxFQUFHZixJQUFJLENBQUNDLEVBQUwsR0FBVWUsZUFBVixDQUEwQixDQUExQjtBQUhHLEtBQWY7QUFLQSxVQUFNWCxVQUFVLEdBQUcsSUFBSVgsY0FBSixDQUFtQkksTUFBbkIsQ0FBbkI7QUFFQVcsSUFBQUEsTUFBTSxDQUFDSixVQUFVLENBQUNZLGFBQVgsRUFBRCxDQUFOLENBQW1DSixJQUFuQyxDQUF3QyxDQUF4QztBQUNILEdBVkcsQ0FBSjtBQVdILENBYk8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEJvb2tSZXBvc2l0b3J5ID0gcmVxdWlyZSgnLi9ib29rLnJlcG9zaXRvcnknKTtcblxuZGVzY3JpYmUoJ0Jvb2sgcmVwb3NpdG9yeSBTYXZlJywgZnVuY3Rpb24gKCkge1xuXG4gICAgdGVzdCgnVGVzdCBzYXZlIGEgYm9vaycsICgpID0+IHtcblxuICAgICAgICBjb25zdCBkYk1vY2sgPSB7XG4gICAgICAgICAgICBnZXQgOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgICAgICAgIHB1c2ggOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgICAgICAgIHdyaXRlIDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKClcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVwb3NpdG9yeSA9IG5ldyBCb29rUmVwb3NpdG9yeShkYk1vY2spO1xuICAgICAgICByZXBvc2l0b3J5LnNhdmUoe2lkOiAxLCBuYW1lOiBcIlVuaXQgdGVzdFwifSk7XG5cbiAgICAgICAgZXhwZWN0KGRiTW9jay53cml0ZS5tb2NrLmNhbGxzLmxlbmd0aCkudG9CZSgxKTtcbiAgICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnQm9vayByZXBvc2l0b3J5IGdldFRvdGFsQ291bnQnLCBmdW5jdGlvbiAoKSB7XG5cbiAgICB0ZXN0KCdUZXN0IGdldFRvdGFsQ291bnQnLCAoKSA9PiB7XG5cbiAgICAgICAgY29uc3QgZGJNb2NrID0ge1xuICAgICAgICAgICAgZ2V0IDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICAgICAgICBzaXplIDogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICAgICAgICB2YWx1ZSA6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoMilcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVwb3NpdG9yeSA9IG5ldyBCb29rUmVwb3NpdG9yeShkYk1vY2spO1xuXG4gICAgICAgIGV4cGVjdChyZXBvc2l0b3J5LmdldFRvdGFsQ291bnQoKSkudG9CZSgyKTtcbiAgICB9KTtcbn0pOyJdfQ==